(function(d){var h=function(a,b){this.__construct(a,b)},q=0,l=0,m=!1,n=top!=self?top:self,e=navigator.userAgent.toLowerCase(),r=/webkit/.test(e);/mozilla/.test(e)&&/(compatible|webkit)/.test(e);var k=/chrome/.test(e),t=/msie|trident\//.test(e)&&!/opera/.test(e),u=/firefox/.test(e);/safari/.test(e)&&/chrome/.test(e);/opera/.test(e);var p=parseInt(e.match(/[^\s]+(?:ri|ox|me|ra|ie|dent)(?:\/|\s)([\d]+)/i)[1],10),g={simulateClick:function(a){var b=document.createElement("a"),c=document.createEvent("MouseEvents"); b.href=a||"data:text/html,<script>window.close();\x3c/script>;";document.body.appendChild(b);c.initMouseEvent("click",!0,!0,d,0,0,0,0,0,!0,!1,!1,!0,0,null);b.dispatchEvent(c);b.parentNode.removeChild(b)},blur:function(a){try{a.blur(),a.opener.window.focus(),d.self.window.focus(),d.focus(),u?this.openCloseWindow(a):r?(!k||k&&41>p)&&this.openCloseTab():t&&setTimeout(function(){a.blur();a.opener.window.focus();d.self.window.focus();d.focus()},1E3)}catch(b){}},openCloseWindow:function(a){var b=a.window.open("about:blank"); b.focus();b.close();setTimeout(function(){try{b=a.window.open("about:blank"),b.focus(),b.close()}catch(c){}},1)},openCloseTab:function(){this.simulateClick()},detachEvent:function(a,b,c){c=c||d;return c.removeEventListener?c.removeEventListener(a,b):c.detachEvent("on"+a,b)},attachEvent:function(a,b,c){c=c||d;return c.addEventListener?c.addEventListener(a,b):c.attachEvent("on"+a,b)},mergeObject:function(a,b){var c={},d,f;for(d=0;d<arguments.length;d++)for(f in arguments[d])c[f]=arguments[d][f];return c}, getCookie:function(a){return(a=document.cookie.match(new RegExp(a+"=[^;]+","i")))?decodeURIComponent(a[0].split("=")[1]):null},setCookie:function(a,b,c,d){if(null===c||"undefined"==typeof c)c="";else{var f;"number"==typeof c?(f=new Date,f.setTime(f.getTime()+6E4*c)):f=c;c="; expires="+f.toUTCString()}document.cookie=a+"="+escape(b)+c+"; path="+(d||"/")}};h.prototype={defaultWindowOptions:{width:d.screen.width,height:d.screen.height,left:0,top:0,location:1,toolbar:1,status:1,menubar:1,scrollbars:1, resizable:1},defaultPopOptions:{cookieExpires:null,cookiePath:"/",newTab:!0,blur:!0,blurByAlert:!1,chromeDelay:500,smart:!1,beforeOpen:function(){},afterOpen:function(){}},__chromeNewWindowOptions:{scrollbars:0},__construct:function(a,b){this.url=a;this.index=q++;this.name="ChipPopunder_"+this.index;this.executed=!1;this.setOptions(b);this.register()},register:function(){if(!this.isExecuted()){var a=this,b,c,e=[],f=function(h){console.log(1);if(a.shouldExecute())for(c in l=(new Date).getTime(),a.setExecuted(), a.options.beforeOpen.call(void 0,this),a.options.newTab?k&&30<p&&a.options.blur?(d.open("javascript:window.focus()","_self",""),g.simulateClick(a.url),b=null):(b=n.window.open(a.url,"_blank"),setTimeout(function(){!m&&a.options.blurByAlert&&(m=!0,alert())},3)):b=n.window.open(a.url,this.url,a.getParams()),a.options.blur&&g.blur(b),a.options.afterOpen.call(void 0,this),e)g.detachEvent("click",f,e[c])},h=function(b){if(a.isExecuted())g.detachEvent("mousemove",h);else try{b.originalTarget&&"undefined"== typeof b.originalTarget[a.name]&&(b.originalTarget[a.name]=!0,g.attachEvent("click",f,b.originalTarget),e.push(b.originalTarget))}catch(c){}};this.options.smart?g.attachEvent("mousemove",h):(g.attachEvent("click",f,d),e.push(d),g.attachEvent("click",f,document),e.push(document))}},shouldExecute:function(){return k&&l&&l+this.options.chromeDelay>(new Date).getTime()?!1:!this.isExecuted()},isExecuted:function(){return this.executed||!!g.getCookie(this.name)},setExecuted:function(){this.executed=!0; g.setCookie(this.name,1,this.options.cookieExpires,this.options.cookiePath)},setOptions:function(a){this.options=g.mergeObject(this.defaultWindowOptions,this.defaultPopOptions,a||{});if(!this.options.newTab&&k)for(var b in this.__chromeNewWindowOptions)this.options[b]=this.__chromeNewWindowOptions[b]},getParams:function(){var a="",b;for(b in this.options)"undefined"!=typeof this.defaultWindowOptions[b]&&(a+=(a?",":"")+b+"="+this.options[b]);return a}};h.make=function(a,b){return new this(a,b)};d.SmartPopunder= h})(window);